#!/usr/bin/zsh
# This hook is sourced after every virtualenv is activated.

# show the active virtualenv on the right side of my screen instead
PS1="$_OLD_VIRTUAL_PS1"
_OLD_RPROMPT="$RPROMPT"
RPROMPT="%{${fg_bold[white]}%}(env: %{${fg[green]}%}`basename \"$VIRTUAL_ENV\"`%{${fg_bold[white]}%})%{${reset_color}%} $RPROMPT"


# Changing the Default Behavior of cd
#   cd w/o args will go to the project root
cd () {
    if (( $# == 0 ))
    then
        builtin cd $PROJECT_HOME
    else
        builtin cd "$@"
    fi
}
cd


# move to project folder if exist (it will work if the env is same as the project name)
proj_name=$(basename $VIRTUAL_ENV)
proj_dir="$PROJECT_HOME/$proj_name"

if [ -d $proj_dir ]
then
  cd $proj_dir
fi
